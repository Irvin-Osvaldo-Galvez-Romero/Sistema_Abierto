{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\Sistema_Abierto\\\\proyecto\\\\frontend\\\\src\\\\pages\\\\AdminStudentsPage.tsx\",\n  _s = $RefreshSig$();\n/**\r\n * P√°gina de Lista de Estudiantes (Admin)\r\n * Ver todos los estudiantes y sus documentos\r\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Box, Container, Paper, Typography, Button, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, IconButton, Chip, TextField, InputAdornment, Stack } from '@mui/material';\nimport { ArrowBack, Search, Visibility, PersonAdd, Logout, PersonOff, DeleteForever } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '../store/authStore';\nimport toast from 'react-hot-toast';\nimport ConfirmationDialog from '../components/ConfirmationDialog';\nimport api from '../services/api.service';\nimport PageHeader from '../components/PageHeader';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AdminStudentsPage = () => {\n  _s();\n  const navigate = useNavigate();\n  const {\n    isAuthenticated,\n    logout\n  } = useAuthStore();\n  const [estudiantes, setEstudiantes] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [bajaDialog, setBajaDialog] = useState(false);\n  const [deleteDialog, setDeleteDialog] = useState(false);\n  const [selectedStudent, setSelectedStudent] = useState(null);\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/login');\n    } else {\n      loadStudents();\n    }\n  }, [isAuthenticated, navigate]);\n  const loadStudents = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('accessToken');\n      const response = await api.get('/students', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setEstudiantes(response.data.data);\n    } catch (error) {\n      toast.error('Error al cargar estudiantes');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSearch = async () => {\n    if (searchTerm.length < 2) {\n      loadStudents();\n      return;\n    }\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await api.get('/students/search', {\n        params: {\n          q: searchTerm\n        },\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setEstudiantes(response.data.data);\n    } catch (error) {\n      toast.error('Error en la b√∫squeda');\n    }\n  };\n  const handleBajaClick = estudiante => {\n    setSelectedStudent(estudiante);\n    setBajaDialog(true);\n  };\n  const handleDeleteClick = estudiante => {\n    setSelectedStudent(estudiante);\n    setDeleteDialog(true);\n  };\n  const handleBajaConfirm = async () => {\n    if (!selectedStudent) return;\n    try {\n      const token = localStorage.getItem('accessToken');\n      await api.patch(`/students/${selectedStudent.id}/baja`, {}, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      toast.success('Estudiante dado de baja exitosamente');\n      setBajaDialog(false);\n      setSelectedStudent(null);\n      loadStudents(); // Recargar lista\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n      const errorMsg = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message) || 'Error al dar de baja estudiante';\n      toast.error(errorMsg);\n    }\n  };\n  const handleDeleteConfirm = async () => {\n    if (!selectedStudent) return;\n    try {\n      const token = localStorage.getItem('accessToken');\n      await api.delete(`/students/${selectedStudent.id}/permanent`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      toast.success('Estudiante eliminado permanentemente de la base de datos');\n      setDeleteDialog(false);\n      setSelectedStudent(null);\n      loadStudents(); // Recargar lista\n    } catch (error) {\n      var _error$response2, _error$response2$data, _error$response2$data2;\n      const errorMsg = ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : (_error$response2$data = _error$response2.data) === null || _error$response2$data === void 0 ? void 0 : (_error$response2$data2 = _error$response2$data.error) === null || _error$response2$data2 === void 0 ? void 0 : _error$response2$data2.message) || 'Error al eliminar estudiante';\n      toast.error(errorMsg);\n    }\n  };\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n  const getEstatusColor = estatus => {\n    switch (estatus) {\n      case 'ACTIVO':\n        return 'success';\n      case 'INACTIVO':\n        return 'default';\n      case 'EGRESADO':\n        return 'info';\n      default:\n        return 'default';\n    }\n  };\n  const filteredEstudiantes = estudiantes;\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      backgroundColor: '#f5f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: \"Gesti\\xF3n de Estudiantes\",\n      subtitle: \"Coordinaci\\xF3n acad\\xE9mica \\xB7 Sistema abierto\",\n      gradientFrom: \"#008000\",\n      gradientTo: \"#006000\",\n      maxWidth: \"xl\",\n      actions: /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"inherit\",\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 26\n          }, this),\n          onClick: () => navigate('/admin/dashboard'),\n          sx: {\n            borderColor: '#FFFFFF',\n            color: '#FFFFFF',\n            '&:hover': {\n              borderColor: '#FFFFFF',\n              backgroundColor: 'rgba(255,255,255,0.1)'\n            }\n          },\n          children: \"Regresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"inherit\",\n          startIcon: /*#__PURE__*/_jsxDEV(PersonAdd, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 202,\n            columnNumber: 26\n          }, this),\n          onClick: () => navigate('/admin/nuevo-estudiante'),\n          sx: {\n            borderColor: '#FFFFFF',\n            color: '#FFFFFF',\n            '&:hover': {\n              borderColor: '#FFFFFF',\n              backgroundColor: 'rgba(255,255,255,0.1)'\n            }\n          },\n          children: \"Nuevo Estudiante\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"inherit\",\n          startIcon: /*#__PURE__*/_jsxDEV(Logout, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 26\n          }, this),\n          onClick: handleLogout,\n          sx: {\n            borderColor: '#FFFFFF',\n            color: '#FFFFFF',\n            '&:hover': {\n              borderColor: '#FFFFFF',\n              backgroundColor: 'rgba(255,255,255,0.1)'\n            }\n          },\n          children: \"Salir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          p: 3,\n          mb: 3,\n          borderRadius: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            gap: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(TextField, {\n            fullWidth: true,\n            placeholder: \"Buscar por nombre, matr\\xEDcula o email...\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            onKeyPress: e => e.key === 'Enter' && handleSearch(),\n            InputProps: {\n              startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n                position: \"start\",\n                children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 19\n              }, this)\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"contained\",\n            onClick: handleSearch,\n            sx: {\n              minWidth: 120,\n              backgroundColor: '#008000',\n              '&:hover': {\n                backgroundColor: '#006000'\n              }\n            },\n            children: \"Buscar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"outlined\",\n            onClick: loadStudents,\n            sx: {\n              minWidth: 100,\n              borderColor: '#008000',\n              color: '#008000'\n            },\n            children: \"Ver Todos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        sx: {\n          borderRadius: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            sx: {\n              backgroundColor: '#008000'\n            },\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Matr\\xEDcula\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Nombre Completo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Carrera\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 282,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Estatus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 283,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold',\n                  textAlign: 'center'\n                },\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: loading ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 6,\n                align: \"center\",\n                sx: {\n                  py: 4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    color: '#888888'\n                  },\n                  children: \"Cargando estudiantes...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 17\n            }, this) : filteredEstudiantes.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 6,\n                align: \"center\",\n                sx: {\n                  py: 4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    color: '#888888'\n                  },\n                  children: \"No se encontraron estudiantes\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 297,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 17\n            }, this) : filteredEstudiantes.map(estudiante => {\n              var _estudiante$carrera;\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                sx: {\n                  '&:hover': {\n                    backgroundColor: '#f0fff0'\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    fontWeight: 600,\n                    color: '#000000'\n                  },\n                  children: estudiante.matricula || 'Sin matr√≠cula'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 310,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#000000'\n                  },\n                  children: [estudiante.usuario.nombre, \" \", estudiante.usuario.apellidoPaterno]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#333333'\n                  },\n                  children: estudiante.usuario.email\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 316,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#333333'\n                  },\n                  children: ((_estudiante$carrera = estudiante.carrera) === null || _estudiante$carrera === void 0 ? void 0 : _estudiante$carrera.nombre) || 'Sin carrera'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 319,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(Chip, {\n                    label: estudiante.estatus,\n                    color: getEstatusColor(estudiante.estatus),\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 323,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 322,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => navigate(`/admin/estudiante/${estudiante.id}`),\n                    sx: {\n                      color: '#008000'\n                    },\n                    title: \"Ver Detalles\",\n                    children: /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 330,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleBajaClick(estudiante),\n                    sx: {\n                      color: '#ff9800'\n                    },\n                    title: \"Dar de Baja (Marca como inactivo)\",\n                    children: /*#__PURE__*/_jsxDEV(PersonOff, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 342,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 337,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                    onClick: () => handleDeleteClick(estudiante),\n                    sx: {\n                      color: '#d32f2f'\n                    },\n                    title: \"Eliminar Permanentemente (Borra de BD)\",\n                    children: /*#__PURE__*/_jsxDEV(DeleteForever, {}, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 349,\n                      columnNumber: 25\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 344,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 329,\n                  columnNumber: 21\n                }, this)]\n              }, estudiante.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialog, {\n        open: bajaDialog,\n        title: \"Dar de Baja Estudiante\",\n        message: selectedStudent ? `¬øEst√°s seguro de que deseas dar de baja al estudiante ${selectedStudent.usuario.nombre} ${selectedStudent.usuario.apellidoPaterno} (${selectedStudent.matricula})?\\n\\nEsta acci√≥n marcar√° al estudiante como INACTIVO pero conservar√° sus datos en el sistema.` : '',\n        onConfirm: handleBajaConfirm,\n        onClose: () => {\n          setBajaDialog(false);\n          setSelectedStudent(null);\n        },\n        confirmText: \"Dar de Baja\",\n        cancelText: \"Cancelar\",\n        type: \"warning\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialog, {\n        open: deleteDialog,\n        title: \"\\u26A0\\uFE0F Eliminar Permanentemente\",\n        message: selectedStudent ? `¬øEst√°s ABSOLUTAMENTE SEGURO de que deseas ELIMINAR PERMANENTEMENTE al estudiante ${selectedStudent.usuario.nombre} ${selectedStudent.usuario.apellidoPaterno} (${selectedStudent.matricula})?\\n\\nüö® ADVERTENCIA: Esta acci√≥n eliminar√° COMPLETAMENTE:\\n‚Ä¢ El estudiante de la base de datos\\n‚Ä¢ Su usuario y credenciales\\n‚Ä¢ Todos sus documentos subidos\\n‚Ä¢ Todo su historial\\n\\n‚ö†Ô∏è ESTA ACCI√ìN NO SE PUEDE DESHACER` : '',\n        onConfirm: handleDeleteConfirm,\n        onClose: () => {\n          setDeleteDialog(false);\n          setSelectedStudent(null);\n        },\n        confirmText: \"Eliminar Permanentemente\",\n        cancelText: \"Cancelar\",\n        type: \"error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 177,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminStudentsPage, \"Ivg6OwMmDQ0UxTswJMFe+JJCcYE=\", false, function () {\n  return [useNavigate, useAuthStore];\n});\n_c = AdminStudentsPage;\nexport default AdminStudentsPage;\nvar _c;\n$RefreshReg$(_c, \"AdminStudentsPage\");","map":{"version":3,"names":["React","useState","useEffect","Box","Container","Paper","Typography","Button","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","Chip","TextField","InputAdornment","Stack","ArrowBack","Search","Visibility","PersonAdd","Logout","PersonOff","DeleteForever","useNavigate","useAuthStore","toast","ConfirmationDialog","api","PageHeader","jsxDEV","_jsxDEV","AdminStudentsPage","_s","navigate","isAuthenticated","logout","estudiantes","setEstudiantes","loading","setLoading","searchTerm","setSearchTerm","bajaDialog","setBajaDialog","deleteDialog","setDeleteDialog","selectedStudent","setSelectedStudent","loadStudents","token","localStorage","getItem","response","get","headers","Authorization","data","error","handleSearch","length","params","q","handleBajaClick","estudiante","handleDeleteClick","handleBajaConfirm","patch","id","success","_error$response","_error$response$data","_error$response$data$","errorMsg","message","handleDeleteConfirm","delete","_error$response2","_error$response2$data","_error$response2$data2","handleLogout","getEstatusColor","estatus","filteredEstudiantes","sx","minHeight","backgroundColor","children","title","subtitle","gradientFrom","gradientTo","maxWidth","actions","direction","spacing","variant","color","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","borderColor","p","mb","borderRadius","display","gap","fullWidth","placeholder","value","onChange","e","target","onKeyPress","key","InputProps","startAdornment","position","minWidth","component","fontWeight","textAlign","colSpan","align","py","map","_estudiante$carrera","matricula","usuario","nombre","apellidoPaterno","email","carrera","label","size","open","onConfirm","onClose","confirmText","cancelText","type","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/Sistema_Abierto/proyecto/frontend/src/pages/AdminStudentsPage.tsx"],"sourcesContent":["/**\r\n * P√°gina de Lista de Estudiantes (Admin)\r\n * Ver todos los estudiantes y sus documentos\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  Chip,\r\n  TextField,\r\n  InputAdornment,\r\n  Stack,\r\n} from '@mui/material';\r\nimport {\r\n  ArrowBack,\r\n  Search,\r\n  Visibility,\r\n  PersonAdd,\r\n  Logout,\r\n  Delete,\r\n  PersonOff,\r\n  DeleteForever,\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuthStore } from '../store/authStore';\r\nimport toast from 'react-hot-toast';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport api from '../services/api.service';\r\nimport PageHeader from '../components/PageHeader';\r\n\r\ninterface Estudiante {\r\n  id: string;\r\n  matricula: string;\r\n  usuario: {\r\n    nombre: string;\r\n    apellidoPaterno: string;\r\n    email: string;\r\n  };\r\n  carrera?: {\r\n    nombre: string;\r\n  };\r\n  estatus: string;\r\n}\r\n\r\nexport const AdminStudentsPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const { isAuthenticated, logout } = useAuthStore();\r\n  const [estudiantes, setEstudiantes] = useState<Estudiante[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [bajaDialog, setBajaDialog] = useState(false);\r\n  const [deleteDialog, setDeleteDialog] = useState(false);\r\n  const [selectedStudent, setSelectedStudent] = useState<Estudiante | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!isAuthenticated) {\r\n      navigate('/login');\r\n    } else {\r\n      loadStudents();\r\n    }\r\n  }, [isAuthenticated, navigate]);\r\n\r\n  const loadStudents = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('accessToken');\r\n      const response = await api.get('/students', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      setEstudiantes(response.data.data);\r\n    } catch (error: any) {\r\n      toast.error('Error al cargar estudiantes');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSearch = async () => {\r\n    if (searchTerm.length < 2) {\r\n      loadStudents();\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      const response = await api.get('/students/search', {\r\n        params: { q: searchTerm },\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      setEstudiantes(response.data.data);\r\n    } catch (error) {\r\n      toast.error('Error en la b√∫squeda');\r\n    }\r\n  };\r\n\r\n  const handleBajaClick = (estudiante: Estudiante) => {\r\n    setSelectedStudent(estudiante);\r\n    setBajaDialog(true);\r\n  };\r\n\r\n  const handleDeleteClick = (estudiante: Estudiante) => {\r\n    setSelectedStudent(estudiante);\r\n    setDeleteDialog(true);\r\n  };\r\n\r\n  const handleBajaConfirm = async () => {\r\n    if (!selectedStudent) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      await api.patch(\r\n        `/students/${selectedStudent.id}/baja`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      toast.success('Estudiante dado de baja exitosamente');\r\n      setBajaDialog(false);\r\n      setSelectedStudent(null);\r\n      loadStudents(); // Recargar lista\r\n    } catch (error: any) {\r\n      const errorMsg = error.response?.data?.error?.message || 'Error al dar de baja estudiante';\r\n      toast.error(errorMsg);\r\n    }\r\n  };\r\n\r\n  const handleDeleteConfirm = async () => {\r\n    if (!selectedStudent) return;\r\n\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      await api.delete(\r\n        `/students/${selectedStudent.id}/permanent`,\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      toast.success('Estudiante eliminado permanentemente de la base de datos');\r\n      setDeleteDialog(false);\r\n      setSelectedStudent(null);\r\n      loadStudents(); // Recargar lista\r\n    } catch (error: any) {\r\n      const errorMsg = error.response?.data?.error?.message || 'Error al eliminar estudiante';\r\n      toast.error(errorMsg);\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const getEstatusColor = (estatus: string) => {\r\n    switch (estatus) {\r\n      case 'ACTIVO': return 'success';\r\n      case 'INACTIVO': return 'default';\r\n      case 'EGRESADO': return 'info';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const filteredEstudiantes = estudiantes;\r\n\r\n  return (\r\n    <Box sx={{ minHeight: '100vh', backgroundColor: '#f5f5f5' }}>\r\n      <PageHeader\r\n        title=\"Gesti√≥n de Estudiantes\"\r\n        subtitle=\"Coordinaci√≥n acad√©mica ¬∑ Sistema abierto\"\r\n        gradientFrom=\"#008000\"\r\n        gradientTo=\"#006000\"\r\n        maxWidth=\"xl\"\r\n        actions={\r\n          <Stack direction=\"row\" spacing={2}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"inherit\"\r\n              startIcon={<ArrowBack />}\r\n              onClick={() => navigate('/admin/dashboard')}\r\n              sx={{\r\n                borderColor: '#FFFFFF',\r\n                color: '#FFFFFF',\r\n                '&:hover': { borderColor: '#FFFFFF', backgroundColor: 'rgba(255,255,255,0.1)' },\r\n              }}\r\n            >\r\n              Regresar\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"inherit\"\r\n              startIcon={<PersonAdd />}\r\n              onClick={() => navigate('/admin/nuevo-estudiante')}\r\n              sx={{\r\n                borderColor: '#FFFFFF',\r\n                color: '#FFFFFF',\r\n                '&:hover': { borderColor: '#FFFFFF', backgroundColor: 'rgba(255,255,255,0.1)' },\r\n              }}\r\n            >\r\n              Nuevo Estudiante\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"inherit\"\r\n              startIcon={<Logout />}\r\n              onClick={handleLogout}\r\n              sx={{\r\n                borderColor: '#FFFFFF',\r\n                color: '#FFFFFF',\r\n                '&:hover': { borderColor: '#FFFFFF', backgroundColor: 'rgba(255,255,255,0.1)' },\r\n              }}\r\n            >\r\n              Salir\r\n            </Button>\r\n          </Stack>\r\n        }\r\n      />\r\n\r\n      <Container>\r\n        {/* B√∫squeda */}\r\n        <Paper sx={{ p: 3, mb: 3, borderRadius: 2 }}>\r\n          <Box sx={{ display: 'flex', gap: 2 }}>\r\n            <TextField\r\n              fullWidth\r\n              placeholder=\"Buscar por nombre, matr√≠cula o email...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\r\n              InputProps={{\r\n                startAdornment: (\r\n                  <InputAdornment position=\"start\">\r\n                    <Search />\r\n                  </InputAdornment>\r\n                ),\r\n              }}\r\n            />\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleSearch}\r\n              sx={{\r\n                minWidth: 120,\r\n                backgroundColor: '#008000',\r\n                '&:hover': {\r\n                  backgroundColor: '#006000',\r\n                },\r\n              }}\r\n            >\r\n              Buscar\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={loadStudents}\r\n              sx={{\r\n                minWidth: 100,\r\n                borderColor: '#008000',\r\n                color: '#008000',\r\n              }}\r\n            >\r\n              Ver Todos\r\n            </Button>\r\n          </Box>\r\n        </Paper>\r\n\r\n        {/* Tabla de Estudiantes */}\r\n        <TableContainer component={Paper} sx={{ borderRadius: 2 }}>\r\n          <Table>\r\n            <TableHead sx={{ backgroundColor: '#008000' }}>\r\n              <TableRow>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Matr√≠cula</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Nombre Completo</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Email</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Carrera</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Estatus</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold', textAlign: 'center' }}>Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {loading ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={6} align=\"center\" sx={{ py: 4 }}>\r\n                    <Typography sx={{ color: '#888888' }}>Cargando estudiantes...</Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : filteredEstudiantes.length === 0 ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={6} align=\"center\" sx={{ py: 4 }}>\r\n                    <Typography sx={{ color: '#888888' }}>No se encontraron estudiantes</Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : (\r\n                filteredEstudiantes.map((estudiante) => (\r\n                  <TableRow\r\n                    key={estudiante.id}\r\n                    sx={{\r\n                      '&:hover': {\r\n                        backgroundColor: '#f0fff0',\r\n                      },\r\n                    }}\r\n                  >\r\n                    <TableCell sx={{ fontWeight: 600, color: '#000000' }}>\r\n                      {estudiante.matricula || 'Sin matr√≠cula'}\r\n                    </TableCell>\r\n                    <TableCell sx={{ color: '#000000' }}>\r\n                      {estudiante.usuario.nombre} {estudiante.usuario.apellidoPaterno}\r\n                    </TableCell>\r\n                    <TableCell sx={{ color: '#333333' }}>\r\n                      {estudiante.usuario.email}\r\n                    </TableCell>\r\n                    <TableCell sx={{ color: '#333333' }}>\r\n                      {estudiante.carrera?.nombre || 'Sin carrera'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Chip\r\n                        label={estudiante.estatus}\r\n                        color={getEstatusColor(estudiante.estatus) as any}\r\n                        size=\"small\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                      <IconButton\r\n                        onClick={() => navigate(`/admin/estudiante/${estudiante.id}`)}\r\n                        sx={{ color: '#008000' }}\r\n                        title=\"Ver Detalles\"\r\n                      >\r\n                        <Visibility />\r\n                      </IconButton>\r\n                      <IconButton\r\n                        onClick={() => handleBajaClick(estudiante)}\r\n                        sx={{ color: '#ff9800' }}\r\n                        title=\"Dar de Baja (Marca como inactivo)\"\r\n                      >\r\n                        <PersonOff />\r\n                      </IconButton>\r\n                      <IconButton\r\n                        onClick={() => handleDeleteClick(estudiante)}\r\n                        sx={{ color: '#d32f2f' }}\r\n                        title=\"Eliminar Permanentemente (Borra de BD)\"\r\n                      >\r\n                        <DeleteForever />\r\n                      </IconButton>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n\r\n        {/* Di√°logo de Confirmaci√≥n de Baja Definitiva */}\r\n        <ConfirmationDialog\r\n          open={bajaDialog}\r\n          title=\"Dar de Baja Estudiante\"\r\n          message={\r\n            selectedStudent\r\n              ? `¬øEst√°s seguro de que deseas dar de baja al estudiante ${selectedStudent.usuario.nombre} ${selectedStudent.usuario.apellidoPaterno} (${selectedStudent.matricula})?\\n\\nEsta acci√≥n marcar√° al estudiante como INACTIVO pero conservar√° sus datos en el sistema.`\r\n              : ''\r\n          }\r\n          onConfirm={handleBajaConfirm}\r\n          onClose={() => {\r\n            setBajaDialog(false);\r\n            setSelectedStudent(null);\r\n          }}\r\n          confirmText=\"Dar de Baja\"\r\n          cancelText=\"Cancelar\"\r\n          type=\"warning\"\r\n        />\r\n\r\n        {/* Di√°logo de Confirmaci√≥n de Eliminaci√≥n Permanente */}\r\n        <ConfirmationDialog\r\n          open={deleteDialog}\r\n          title=\"‚ö†Ô∏è Eliminar Permanentemente\"\r\n          message={\r\n            selectedStudent\r\n              ? `¬øEst√°s ABSOLUTAMENTE SEGURO de que deseas ELIMINAR PERMANENTEMENTE al estudiante ${selectedStudent.usuario.nombre} ${selectedStudent.usuario.apellidoPaterno} (${selectedStudent.matricula})?\\n\\nüö® ADVERTENCIA: Esta acci√≥n eliminar√° COMPLETAMENTE:\\n‚Ä¢ El estudiante de la base de datos\\n‚Ä¢ Su usuario y credenciales\\n‚Ä¢ Todos sus documentos subidos\\n‚Ä¢ Todo su historial\\n\\n‚ö†Ô∏è ESTA ACCI√ìN NO SE PUEDE DESHACER`\r\n              : ''\r\n          }\r\n          onConfirm={handleDeleteConfirm}\r\n          onClose={() => {\r\n            setDeleteDialog(false);\r\n            setSelectedStudent(null);\r\n          }}\r\n          confirmText=\"Eliminar Permanentemente\"\r\n          cancelText=\"Cancelar\"\r\n          type=\"error\"\r\n        />\r\n      </Container>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AdminStudentsPage;\r\n\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SACEC,GAAG,EACHC,SAAS,EACTC,KAAK,EACLC,UAAU,EACVC,MAAM,EACNC,KAAK,EACLC,SAAS,EACTC,SAAS,EACTC,cAAc,EACdC,SAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,IAAI,EACJC,SAAS,EACTC,cAAc,EACdC,KAAK,QACA,eAAe;AACtB,SACEC,SAAS,EACTC,MAAM,EACNC,UAAU,EACVC,SAAS,EACTC,MAAM,EAENC,SAAS,EACTC,aAAa,QACR,qBAAqB;AAC5B,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,YAAY,QAAQ,oBAAoB;AACjD,OAAOC,KAAK,MAAM,iBAAiB;AACnC,OAAOC,kBAAkB,MAAM,kCAAkC;AACjE,OAAOC,GAAG,MAAM,yBAAyB;AACzC,OAAOC,UAAU,MAAM,0BAA0B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAgBlD,OAAO,MAAMC,iBAA2B,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAC/C,MAAMC,QAAQ,GAAGV,WAAW,CAAC,CAAC;EAC9B,MAAM;IAAEW,eAAe;IAAEC;EAAO,CAAC,GAAGX,YAAY,CAAC,CAAC;EAClD,MAAM,CAACY,WAAW,EAAEC,cAAc,CAAC,GAAGvC,QAAQ,CAAe,EAAE,CAAC;EAChE,MAAM,CAACwC,OAAO,EAAEC,UAAU,CAAC,GAAGzC,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAAC0C,UAAU,EAAEC,aAAa,CAAC,GAAG3C,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAAC4C,UAAU,EAAEC,aAAa,CAAC,GAAG7C,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC8C,YAAY,EAAEC,eAAe,CAAC,GAAG/C,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACgD,eAAe,EAAEC,kBAAkB,CAAC,GAAGjD,QAAQ,CAAoB,IAAI,CAAC;EAE/EC,SAAS,CAAC,MAAM;IACd,IAAI,CAACmC,eAAe,EAAE;MACpBD,QAAQ,CAAC,QAAQ,CAAC;IACpB,CAAC,MAAM;MACLe,YAAY,CAAC,CAAC;IAChB;EACF,CAAC,EAAE,CAACd,eAAe,EAAED,QAAQ,CAAC,CAAC;EAE/B,MAAMe,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAI;MACFT,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMU,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACjD,MAAMC,QAAQ,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,WAAW,EAAE;QAC1CC,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEFZ,cAAc,CAACe,QAAQ,CAACI,IAAI,CAACA,IAAI,CAAC;IACpC,CAAC,CAAC,OAAOC,KAAU,EAAE;MACnBhC,KAAK,CAACgC,KAAK,CAAC,6BAA6B,CAAC;IAC5C,CAAC,SAAS;MACRlB,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;EAED,MAAMmB,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,IAAIlB,UAAU,CAACmB,MAAM,GAAG,CAAC,EAAE;MACzBX,YAAY,CAAC,CAAC;MACd;IACF;IAEA,IAAI;MACF,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACjD,MAAMC,QAAQ,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,kBAAkB,EAAE;QACjDO,MAAM,EAAE;UAAEC,CAAC,EAAErB;QAAW,CAAC;QACzBc,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAC9C,CAAC,CAAC;MAEFZ,cAAc,CAACe,QAAQ,CAACI,IAAI,CAACA,IAAI,CAAC;IACpC,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdhC,KAAK,CAACgC,KAAK,CAAC,sBAAsB,CAAC;IACrC;EACF,CAAC;EAED,MAAMK,eAAe,GAAIC,UAAsB,IAAK;IAClDhB,kBAAkB,CAACgB,UAAU,CAAC;IAC9BpB,aAAa,CAAC,IAAI,CAAC;EACrB,CAAC;EAED,MAAMqB,iBAAiB,GAAID,UAAsB,IAAK;IACpDhB,kBAAkB,CAACgB,UAAU,CAAC;IAC9BlB,eAAe,CAAC,IAAI,CAAC;EACvB,CAAC;EAED,MAAMoB,iBAAiB,GAAG,MAAAA,CAAA,KAAY;IACpC,IAAI,CAACnB,eAAe,EAAE;IAEtB,IAAI;MACF,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACjD,MAAMxB,GAAG,CAACuC,KAAK,CACb,aAAapB,eAAe,CAACqB,EAAE,OAAO,EACtC,CAAC,CAAC,EACF;QAAEb,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAAE,CAClD,CAAC;MAEDxB,KAAK,CAAC2C,OAAO,CAAC,sCAAsC,CAAC;MACrDzB,aAAa,CAAC,KAAK,CAAC;MACpBI,kBAAkB,CAAC,IAAI,CAAC;MACxBC,YAAY,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,OAAOS,KAAU,EAAE;MAAA,IAAAY,eAAA,EAAAC,oBAAA,EAAAC,qBAAA;MACnB,MAAMC,QAAQ,GAAG,EAAAH,eAAA,GAAAZ,KAAK,CAACL,QAAQ,cAAAiB,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBb,IAAI,cAAAc,oBAAA,wBAAAC,qBAAA,GAApBD,oBAAA,CAAsBb,KAAK,cAAAc,qBAAA,uBAA3BA,qBAAA,CAA6BE,OAAO,KAAI,iCAAiC;MAC1FhD,KAAK,CAACgC,KAAK,CAACe,QAAQ,CAAC;IACvB;EACF,CAAC;EAED,MAAME,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IACtC,IAAI,CAAC5B,eAAe,EAAE;IAEtB,IAAI;MACF,MAAMG,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,aAAa,CAAC;MACjD,MAAMxB,GAAG,CAACgD,MAAM,CACd,aAAa7B,eAAe,CAACqB,EAAE,YAAY,EAC3C;QAAEb,OAAO,EAAE;UAAEC,aAAa,EAAE,UAAUN,KAAK;QAAG;MAAE,CAClD,CAAC;MAEDxB,KAAK,CAAC2C,OAAO,CAAC,0DAA0D,CAAC;MACzEvB,eAAe,CAAC,KAAK,CAAC;MACtBE,kBAAkB,CAAC,IAAI,CAAC;MACxBC,YAAY,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,OAAOS,KAAU,EAAE;MAAA,IAAAmB,gBAAA,EAAAC,qBAAA,EAAAC,sBAAA;MACnB,MAAMN,QAAQ,GAAG,EAAAI,gBAAA,GAAAnB,KAAK,CAACL,QAAQ,cAAAwB,gBAAA,wBAAAC,qBAAA,GAAdD,gBAAA,CAAgBpB,IAAI,cAAAqB,qBAAA,wBAAAC,sBAAA,GAApBD,qBAAA,CAAsBpB,KAAK,cAAAqB,sBAAA,uBAA3BA,sBAAA,CAA6BL,OAAO,KAAI,8BAA8B;MACvFhD,KAAK,CAACgC,KAAK,CAACe,QAAQ,CAAC;IACvB;EACF,CAAC;EAED,MAAMO,YAAY,GAAG,MAAAA,CAAA,KAAY;IAC/B,MAAM5C,MAAM,CAAC,CAAC;IACdF,QAAQ,CAAC,QAAQ,CAAC;EACpB,CAAC;EAED,MAAM+C,eAAe,GAAIC,OAAe,IAAK;IAC3C,QAAQA,OAAO;MACb,KAAK,QAAQ;QAAE,OAAO,SAAS;MAC/B,KAAK,UAAU;QAAE,OAAO,SAAS;MACjC,KAAK,UAAU;QAAE,OAAO,MAAM;MAC9B;QAAS,OAAO,SAAS;IAC3B;EACF,CAAC;EAED,MAAMC,mBAAmB,GAAG9C,WAAW;EAEvC,oBACEN,OAAA,CAAC9B,GAAG;IAACmF,EAAE,EAAE;MAAEC,SAAS,EAAE,OAAO;MAAEC,eAAe,EAAE;IAAU,CAAE;IAAAC,QAAA,gBAC1DxD,OAAA,CAACF,UAAU;MACT2D,KAAK,EAAC,2BAAwB;MAC9BC,QAAQ,EAAC,mDAA0C;MACnDC,YAAY,EAAC,SAAS;MACtBC,UAAU,EAAC,SAAS;MACpBC,QAAQ,EAAC,IAAI;MACbC,OAAO,eACL9D,OAAA,CAACf,KAAK;QAAC8E,SAAS,EAAC,KAAK;QAACC,OAAO,EAAE,CAAE;QAAAR,QAAA,gBAChCxD,OAAA,CAAC1B,MAAM;UACL2F,OAAO,EAAC,UAAU;UAClBC,KAAK,EAAC,SAAS;UACfC,SAAS,eAAEnE,OAAA,CAACd,SAAS;YAAAkF,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UACzBC,OAAO,EAAEA,CAAA,KAAMrE,QAAQ,CAAC,kBAAkB,CAAE;UAC5CkD,EAAE,EAAE;YACFoB,WAAW,EAAE,SAAS;YACtBP,KAAK,EAAE,SAAS;YAChB,SAAS,EAAE;cAAEO,WAAW,EAAE,SAAS;cAAElB,eAAe,EAAE;YAAwB;UAChF,CAAE;UAAAC,QAAA,EACH;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTvE,OAAA,CAAC1B,MAAM;UACL2F,OAAO,EAAC,UAAU;UAClBC,KAAK,EAAC,SAAS;UACfC,SAAS,eAAEnE,OAAA,CAACX,SAAS;YAAA+E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UACzBC,OAAO,EAAEA,CAAA,KAAMrE,QAAQ,CAAC,yBAAyB,CAAE;UACnDkD,EAAE,EAAE;YACFoB,WAAW,EAAE,SAAS;YACtBP,KAAK,EAAE,SAAS;YAChB,SAAS,EAAE;cAAEO,WAAW,EAAE,SAAS;cAAElB,eAAe,EAAE;YAAwB;UAChF,CAAE;UAAAC,QAAA,EACH;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACTvE,OAAA,CAAC1B,MAAM;UACL2F,OAAO,EAAC,UAAU;UAClBC,KAAK,EAAC,SAAS;UACfC,SAAS,eAAEnE,OAAA,CAACV,MAAM;YAAA8E,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAE;UACtBC,OAAO,EAAEvB,YAAa;UACtBI,EAAE,EAAE;YACFoB,WAAW,EAAE,SAAS;YACtBP,KAAK,EAAE,SAAS;YAChB,SAAS,EAAE;cAAEO,WAAW,EAAE,SAAS;cAAElB,eAAe,EAAE;YAAwB;UAChF,CAAE;UAAAC,QAAA,EACH;QAED;UAAAY,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ;IACR;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eAEFvE,OAAA,CAAC7B,SAAS;MAAAqF,QAAA,gBAERxD,OAAA,CAAC5B,KAAK;QAACiF,EAAE,EAAE;UAAEqB,CAAC,EAAE,CAAC;UAAEC,EAAE,EAAE,CAAC;UAAEC,YAAY,EAAE;QAAE,CAAE;QAAApB,QAAA,eAC1CxD,OAAA,CAAC9B,GAAG;UAACmF,EAAE,EAAE;YAAEwB,OAAO,EAAE,MAAM;YAAEC,GAAG,EAAE;UAAE,CAAE;UAAAtB,QAAA,gBACnCxD,OAAA,CAACjB,SAAS;YACRgG,SAAS;YACTC,WAAW,EAAC,4CAAyC;YACrDC,KAAK,EAAEvE,UAAW;YAClBwE,QAAQ,EAAGC,CAAC,IAAKxE,aAAa,CAACwE,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE;YAC/CI,UAAU,EAAGF,CAAC,IAAKA,CAAC,CAACG,GAAG,KAAK,OAAO,IAAI1D,YAAY,CAAC,CAAE;YACvD2D,UAAU,EAAE;cACVC,cAAc,eACZxF,OAAA,CAAChB,cAAc;gBAACyG,QAAQ,EAAC,OAAO;gBAAAjC,QAAA,eAC9BxD,OAAA,CAACb,MAAM;kBAAAiF,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAE;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACI;YAEpB;UAAE;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACH,CAAC,eACFvE,OAAA,CAAC1B,MAAM;YACL2F,OAAO,EAAC,WAAW;YACnBO,OAAO,EAAE5C,YAAa;YACtByB,EAAE,EAAE;cACFqC,QAAQ,EAAE,GAAG;cACbnC,eAAe,EAAE,SAAS;cAC1B,SAAS,EAAE;gBACTA,eAAe,EAAE;cACnB;YACF,CAAE;YAAAC,QAAA,EACH;UAED;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTvE,OAAA,CAAC1B,MAAM;YACL2F,OAAO,EAAC,UAAU;YAClBO,OAAO,EAAEtD,YAAa;YACtBmC,EAAE,EAAE;cACFqC,QAAQ,EAAE,GAAG;cACbjB,WAAW,EAAE,SAAS;cACtBP,KAAK,EAAE;YACT,CAAE;YAAAV,QAAA,EACH;UAED;YAAAY,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eAGRvE,OAAA,CAACtB,cAAc;QAACiH,SAAS,EAAEvH,KAAM;QAACiF,EAAE,EAAE;UAAEuB,YAAY,EAAE;QAAE,CAAE;QAAApB,QAAA,eACxDxD,OAAA,CAACzB,KAAK;UAAAiF,QAAA,gBACJxD,OAAA,CAACrB,SAAS;YAAC0E,EAAE,EAAE;cAAEE,eAAe,EAAE;YAAU,CAAE;YAAAC,QAAA,eAC5CxD,OAAA,CAACpB,QAAQ;cAAA4E,QAAA,gBACPxD,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE;gBAAO,CAAE;gBAAApC,QAAA,EAAC;cAAS;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC9EvE,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE;gBAAO,CAAE;gBAAApC,QAAA,EAAC;cAAe;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eACpFvE,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE;gBAAO,CAAE;gBAAApC,QAAA,EAAC;cAAK;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC1EvE,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE;gBAAO,CAAE;gBAAApC,QAAA,EAAC;cAAO;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC5EvE,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE;gBAAO,CAAE;gBAAApC,QAAA,EAAC;cAAO;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC,eAC5EvE,OAAA,CAACvB,SAAS;gBAAC4E,EAAE,EAAE;kBAAEa,KAAK,EAAE,SAAS;kBAAE0B,UAAU,EAAE,MAAM;kBAAEC,SAAS,EAAE;gBAAS,CAAE;gBAAArC,QAAA,EAAC;cAAQ;gBAAAY,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAW,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC1F;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACF,CAAC,eACZvE,OAAA,CAACxB,SAAS;YAAAgF,QAAA,EACPhD,OAAO,gBACNR,OAAA,CAACpB,QAAQ;cAAA4E,QAAA,eACPxD,OAAA,CAACvB,SAAS;gBAACqH,OAAO,EAAE,CAAE;gBAACC,KAAK,EAAC,QAAQ;gBAAC1C,EAAE,EAAE;kBAAE2C,EAAE,EAAE;gBAAE,CAAE;gBAAAxC,QAAA,eAClDxD,OAAA,CAAC3B,UAAU;kBAACgF,EAAE,EAAE;oBAAEa,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,EAAC;gBAAuB;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,GACTnB,mBAAmB,CAACvB,MAAM,KAAK,CAAC,gBAClC7B,OAAA,CAACpB,QAAQ;cAAA4E,QAAA,eACPxD,OAAA,CAACvB,SAAS;gBAACqH,OAAO,EAAE,CAAE;gBAACC,KAAK,EAAC,QAAQ;gBAAC1C,EAAE,EAAE;kBAAE2C,EAAE,EAAE;gBAAE,CAAE;gBAAAxC,QAAA,eAClDxD,OAAA,CAAC3B,UAAU;kBAACgF,EAAE,EAAE;oBAAEa,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,EAAC;gBAA6B;kBAAAY,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAY;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACvE;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACJ,CAAC,GAEXnB,mBAAmB,CAAC6C,GAAG,CAAEhE,UAAU;cAAA,IAAAiE,mBAAA;cAAA,oBACjClG,OAAA,CAACpB,QAAQ;gBAEPyE,EAAE,EAAE;kBACF,SAAS,EAAE;oBACTE,eAAe,EAAE;kBACnB;gBACF,CAAE;gBAAAC,QAAA,gBAEFxD,OAAA,CAACvB,SAAS;kBAAC4E,EAAE,EAAE;oBAAEuC,UAAU,EAAE,GAAG;oBAAE1B,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,EAClDvB,UAAU,CAACkE,SAAS,IAAI;gBAAe;kBAAA/B,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC/B,CAAC,eACZvE,OAAA,CAACvB,SAAS;kBAAC4E,EAAE,EAAE;oBAAEa,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,GACjCvB,UAAU,CAACmE,OAAO,CAACC,MAAM,EAAC,GAAC,EAACpE,UAAU,CAACmE,OAAO,CAACE,eAAe;gBAAA;kBAAAlC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtD,CAAC,eACZvE,OAAA,CAACvB,SAAS;kBAAC4E,EAAE,EAAE;oBAAEa,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,EACjCvB,UAAU,CAACmE,OAAO,CAACG;gBAAK;kBAAAnC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAChB,CAAC,eACZvE,OAAA,CAACvB,SAAS;kBAAC4E,EAAE,EAAE;oBAAEa,KAAK,EAAE;kBAAU,CAAE;kBAAAV,QAAA,EACjC,EAAA0C,mBAAA,GAAAjE,UAAU,CAACuE,OAAO,cAAAN,mBAAA,uBAAlBA,mBAAA,CAAoBG,MAAM,KAAI;gBAAa;kBAAAjC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACnC,CAAC,eACZvE,OAAA,CAACvB,SAAS;kBAAA+E,QAAA,eACRxD,OAAA,CAAClB,IAAI;oBACH2H,KAAK,EAAExE,UAAU,CAACkB,OAAQ;oBAC1Be,KAAK,EAAEhB,eAAe,CAACjB,UAAU,CAACkB,OAAO,CAAS;oBAClDuD,IAAI,EAAC;kBAAO;oBAAAtC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACb;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACO,CAAC,eACZvE,OAAA,CAACvB,SAAS;kBAACsH,KAAK,EAAC,QAAQ;kBAAAvC,QAAA,gBACvBxD,OAAA,CAACnB,UAAU;oBACT2F,OAAO,EAAEA,CAAA,KAAMrE,QAAQ,CAAC,qBAAqB8B,UAAU,CAACI,EAAE,EAAE,CAAE;oBAC9DgB,EAAE,EAAE;sBAAEa,KAAK,EAAE;oBAAU,CAAE;oBACzBT,KAAK,EAAC,cAAc;oBAAAD,QAAA,eAEpBxD,OAAA,CAACZ,UAAU;sBAAAgF,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACJ,CAAC,eACbvE,OAAA,CAACnB,UAAU;oBACT2F,OAAO,EAAEA,CAAA,KAAMxC,eAAe,CAACC,UAAU,CAAE;oBAC3CoB,EAAE,EAAE;sBAAEa,KAAK,EAAE;oBAAU,CAAE;oBACzBT,KAAK,EAAC,mCAAmC;oBAAAD,QAAA,eAEzCxD,OAAA,CAACT,SAAS;sBAAA6E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACH,CAAC,eACbvE,OAAA,CAACnB,UAAU;oBACT2F,OAAO,EAAEA,CAAA,KAAMtC,iBAAiB,CAACD,UAAU,CAAE;oBAC7CoB,EAAE,EAAE;sBAAEa,KAAK,EAAE;oBAAU,CAAE;oBACzBT,KAAK,EAAC,wCAAwC;oBAAAD,QAAA,eAE9CxD,OAAA,CAACR,aAAa;sBAAA4E,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAE;kBAAC;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACP,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACJ,CAAC;cAAA,GAhDPtC,UAAU,CAACI,EAAE;gBAAA+B,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAiDV,CAAC;YAAA,CACZ;UACF;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACP;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACM,CAAC,eAGjBvE,OAAA,CAACJ,kBAAkB;QACjB+G,IAAI,EAAE/F,UAAW;QACjB6C,KAAK,EAAC,wBAAwB;QAC9Bd,OAAO,EACL3B,eAAe,GACX,yDAAyDA,eAAe,CAACoF,OAAO,CAACC,MAAM,IAAIrF,eAAe,CAACoF,OAAO,CAACE,eAAe,KAAKtF,eAAe,CAACmF,SAAS,gGAAgG,GAChQ,EACL;QACDS,SAAS,EAAEzE,iBAAkB;QAC7B0E,OAAO,EAAEA,CAAA,KAAM;UACbhG,aAAa,CAAC,KAAK,CAAC;UACpBI,kBAAkB,CAAC,IAAI,CAAC;QAC1B,CAAE;QACF6F,WAAW,EAAC,aAAa;QACzBC,UAAU,EAAC,UAAU;QACrBC,IAAI,EAAC;MAAS;QAAA5C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACf,CAAC,eAGFvE,OAAA,CAACJ,kBAAkB;QACjB+G,IAAI,EAAE7F,YAAa;QACnB2C,KAAK,EAAC,uCAA6B;QACnCd,OAAO,EACL3B,eAAe,GACX,oFAAoFA,eAAe,CAACoF,OAAO,CAACC,MAAM,IAAIrF,eAAe,CAACoF,OAAO,CAACE,eAAe,KAAKtF,eAAe,CAACmF,SAAS,0NAA0N,GACrZ,EACL;QACDS,SAAS,EAAEhE,mBAAoB;QAC/BiE,OAAO,EAAEA,CAAA,KAAM;UACb9F,eAAe,CAAC,KAAK,CAAC;UACtBE,kBAAkB,CAAC,IAAI,CAAC;QAC1B,CAAE;QACF6F,WAAW,EAAC,0BAA0B;QACtCC,UAAU,EAAC,UAAU;QACrBC,IAAI,EAAC;MAAO;QAAA5C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACb,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACO,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEV,CAAC;AAACrE,EAAA,CAvVWD,iBAA2B;EAAA,QACrBR,WAAW,EACQC,YAAY;AAAA;AAAAuH,EAAA,GAFrChH,iBAA2B;AAyVxC,eAAeA,iBAAiB;AAAC,IAAAgH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}