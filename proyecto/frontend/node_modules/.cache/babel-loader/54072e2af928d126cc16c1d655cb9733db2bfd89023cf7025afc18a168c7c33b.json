{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\GitHub\\\\Sistema_Abierto\\\\proyecto\\\\frontend\\\\src\\\\pages\\\\AdminDocumentsPage.tsx\",\n  _s = $RefreshSig$();\n/**\r\n * Página de Revisión de Documentos (Admin)\r\n * Ver y aprobar/rechazar documentos de estudiantes\r\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Box, Container, Paper, Typography, Button, Table, TableBody, TableCell, TableContainer, TableHead, TableRow, IconButton, Chip, Dialog, DialogTitle, DialogContent, DialogActions, TextField, Tabs, Tab, Stack, InputAdornment } from '@mui/material';\nimport { ArrowBack, CheckCircle, Cancel, Visibility, Logout, Download, Search } from '@mui/icons-material';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuthStore } from '../store/authStore';\nimport toast from 'react-hot-toast';\nimport ConfirmationDialog from '../components/ConfirmationDialog';\nimport api from '../services/api.service';\nimport PageHeader from '../components/PageHeader';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const AdminDocumentsPage = () => {\n  _s();\n  var _selectedDoc$document, _selectedDoc$document2, _selectedDoc$document3, _selectedDoc$document4, _selectedDoc$document5, _selectedDoc$document6;\n  const navigate = useNavigate();\n  const {\n    logout\n  } = useAuthStore();\n  const [documentos, setDocumentos] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedDoc, setSelectedDoc] = useState(null);\n  const [reviewDialog, setReviewDialog] = useState(false);\n  const [approving, setApproving] = useState(true);\n  const [motivoRechazo, setMotivoRechazo] = useState('');\n  const [tabValue, setTabValue] = useState(0);\n  const [confirmDialog, setConfirmDialog] = useState(false);\n  const [previewDialog, setPreviewDialog] = useState(false);\n  const [busqueda, setBusqueda] = useState('');\n  useEffect(() => {\n    loadDocuments();\n  }, []);\n  const loadDocuments = async () => {\n    try {\n      setLoading(true);\n      const token = localStorage.getItem('accessToken');\n      const response = await api.get('/documentos', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setDocumentos(response.data.data);\n    } catch (error) {\n      toast.error('Error al cargar documentos');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleReview = async () => {\n    if (!selectedDoc) return;\n    if (!approving && !motivoRechazo.trim()) {\n      toast.error('Debes proporcionar un motivo de rechazo');\n      return;\n    }\n    try {\n      const token = localStorage.getItem('accessToken');\n      await api.patch(`/upload/${selectedDoc.id}/review`, {\n        aprobado: approving,\n        motivoRechazo: approving ? undefined : motivoRechazo\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      toast.success(approving ? 'Documento aprobado' : 'Documento rechazado');\n      setReviewDialog(false);\n      setMotivoRechazo('');\n      loadDocuments();\n    } catch (error) {\n      var _error$response, _error$response$data, _error$response$data$;\n      toast.error(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : (_error$response$data$ = _error$response$data.error) === null || _error$response$data$ === void 0 ? void 0 : _error$response$data$.message) || 'Error al revisar documento');\n    }\n  };\n  const openReviewDialog = (doc, approve) => {\n    setSelectedDoc(doc);\n    setApproving(approve);\n    setConfirmDialog(true);\n  };\n  const handleConfirmReview = () => {\n    setConfirmDialog(false);\n    setReviewDialog(true);\n  };\n  const handleViewDocument = async doc => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await api.get(`/upload/view/${doc.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob'\n      });\n      const blobUrl = window.URL.createObjectURL(response.data);\n      const docWithPreview = {\n        ...doc,\n        previewUrl: blobUrl\n      };\n      setSelectedDoc(docWithPreview);\n      setPreviewDialog(true);\n    } catch (error) {\n      console.error('Error al cargar vista previa:', error);\n      toast.error('No se pudo cargar la vista previa del documento');\n    }\n  };\n  const handleDownloadDocument = async doc => {\n    try {\n      const token = localStorage.getItem('accessToken');\n      const response = await api.get(`/upload/download/${doc.id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n        responseType: 'blob'\n      });\n      const url = window.URL.createObjectURL(response.data);\n      const link = document.createElement('a');\n      link.href = url;\n      link.download = `${doc.folio}_${doc.tipo}.${doc.mimeType.split('/')[1]}`;\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n      window.URL.revokeObjectURL(url);\n      toast.success('Documento descargado exitosamente');\n    } catch (error) {\n      console.error('Error al descargar:', error);\n      toast.error('No se pudo descargar el documento');\n    }\n  };\n  const getEstatusColor = estatus => {\n    switch (estatus) {\n      case 'APROBADO':\n        return 'success';\n      case 'RECHAZADO':\n        return 'error';\n      case 'PENDIENTE':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n  const filteredDocs = documentos.filter(doc => {\n    var _doc$documentosEstudi, _estudiante$usuario$a, _estudiante$matricula;\n    // Filtro por estatus\n    let passesStatus = true;\n    if (tabValue === 0) passesStatus = doc.estatus === 'PENDIENTE';else if (tabValue === 1) passesStatus = doc.estatus === 'APROBADO';else if (tabValue === 2) passesStatus = doc.estatus === 'RECHAZADO';\n    if (!passesStatus) return false;\n\n    // Filtro por búsqueda (nombre o matrícula)\n    if (!busqueda.trim()) return true;\n    const terminoBusqueda = busqueda.toLowerCase().trim();\n    const estudiante = (_doc$documentosEstudi = doc.documentosEstudiante[0]) === null || _doc$documentosEstudi === void 0 ? void 0 : _doc$documentosEstudi.estudiante;\n    if (!estudiante) return false;\n    const nombreCompleto = `${estudiante.usuario.nombre} ${(_estudiante$usuario$a = estudiante.usuario.apellidoPaterno) !== null && _estudiante$usuario$a !== void 0 ? _estudiante$usuario$a : ''}`.toLowerCase();\n    const matricula = ((_estudiante$matricula = estudiante.matricula) === null || _estudiante$matricula === void 0 ? void 0 : _estudiante$matricula.toLowerCase()) || '';\n    return nombreCompleto.includes(terminoBusqueda) || matricula.includes(terminoBusqueda);\n  });\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      minHeight: '100vh',\n      backgroundColor: '#f5f5f5'\n    },\n    children: [/*#__PURE__*/_jsxDEV(PageHeader, {\n      title: \"Revisi\\xF3n de Documentos\",\n      subtitle: \"Coordinaci\\xF3n acad\\xE9mica \\xB7 Sistema abierto\",\n      gradientFrom: \"#008000\",\n      gradientTo: \"#006000\",\n      maxWidth: \"xl\",\n      actions: /*#__PURE__*/_jsxDEV(Stack, {\n        direction: \"row\",\n        spacing: 2,\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"inherit\",\n          startIcon: /*#__PURE__*/_jsxDEV(ArrowBack, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 26\n          }, this),\n          onClick: () => navigate('/admin/dashboard'),\n          sx: {\n            borderColor: '#FFFFFF',\n            color: '#FFFFFF',\n            '&:hover': {\n              borderColor: '#FFFFFF',\n              backgroundColor: 'rgba(255,255,255,0.1)'\n            }\n          },\n          children: \"Regresar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"outlined\",\n          color: \"inherit\",\n          startIcon: /*#__PURE__*/_jsxDEV(Logout, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 26\n          }, this),\n          onClick: handleLogout,\n          sx: {\n            borderColor: '#FFFFFF',\n            color: '#FFFFFF',\n            '&:hover': {\n              borderColor: '#FFFFFF',\n              backgroundColor: 'rgba(255,255,255,0.1)'\n            }\n          },\n          children: \"Salir\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          mb: 3,\n          borderRadius: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Tabs, {\n          value: tabValue,\n          onChange: (e, newValue) => setTabValue(newValue),\n          sx: {\n            '& .MuiTab-root': {\n              color: '#333333'\n            },\n            '& .Mui-selected': {\n              color: '#008000'\n            },\n            '& .MuiTabs-indicator': {\n              backgroundColor: '#008000'\n            }\n          },\n          children: [/*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Pendientes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Aprobados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Rechazados\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Tab, {\n            label: \"Todos\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Paper, {\n        sx: {\n          mb: 3,\n          p: 2,\n          borderRadius: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          placeholder: \"Buscar por nombre o matr\\xEDcula...\",\n          value: busqueda,\n          onChange: e => setBusqueda(e.target.value),\n          size: \"small\",\n          InputProps: {\n            startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n              position: \"start\",\n              children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 17\n            }, this)\n          },\n          sx: {\n            maxWidth: 400\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n        component: Paper,\n        sx: {\n          borderRadius: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Table, {\n          children: [/*#__PURE__*/_jsxDEV(TableHead, {\n            sx: {\n              backgroundColor: '#008000'\n            },\n            children: /*#__PURE__*/_jsxDEV(TableRow, {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Folio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Tipo\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Estudiante\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Matr\\xEDcula\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 311,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Tama\\xF1o\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold'\n                },\n                children: \"Estatus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: {\n                  color: '#FFFFFF',\n                  fontWeight: 'bold',\n                  textAlign: 'center'\n                },\n                children: \"Acciones\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n            children: loading ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                sx: {\n                  py: 4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    color: '#888888'\n                  },\n                  children: \"Cargando documentos...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 320,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this) : filteredDocs.length === 0 ? /*#__PURE__*/_jsxDEV(TableRow, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                colSpan: 7,\n                align: \"center\",\n                sx: {\n                  py: 4\n                },\n                children: /*#__PURE__*/_jsxDEV(Typography, {\n                  sx: {\n                    color: '#888888'\n                  },\n                  children: \"No hay documentos en esta categor\\xEDa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 327,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 17\n            }, this) : filteredDocs.map(doc => {\n              var _doc$documentosEstudi2, _doc$documentosEstudi3, _doc$documentosEstudi4;\n              return /*#__PURE__*/_jsxDEV(TableRow, {\n                sx: {\n                  '&:hover': {\n                    backgroundColor: '#f0fff0'\n                  }\n                },\n                children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    fontFamily: 'monospace',\n                    color: '#000000'\n                  },\n                  children: doc.folio\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 340,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#000000'\n                  },\n                  children: doc.tipo.replace(/_/g, ' ')\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 341,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#000000'\n                  },\n                  children: [(_doc$documentosEstudi2 = doc.documentosEstudiante[0]) === null || _doc$documentosEstudi2 === void 0 ? void 0 : _doc$documentosEstudi2.estudiante.usuario.nombre, ' ', (_doc$documentosEstudi3 = doc.documentosEstudiante[0]) === null || _doc$documentosEstudi3 === void 0 ? void 0 : _doc$documentosEstudi3.estudiante.usuario.apellidoPaterno]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#333333'\n                  },\n                  children: ((_doc$documentosEstudi4 = doc.documentosEstudiante[0]) === null || _doc$documentosEstudi4 === void 0 ? void 0 : _doc$documentosEstudi4.estudiante.matricula) || 'N/A'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 346,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  sx: {\n                    color: '#333333'\n                  },\n                  children: [(doc.tamanoBytes / 1024 / 1024).toFixed(2), \" MB\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  children: /*#__PURE__*/_jsxDEV(Chip, {\n                    label: doc.estatus,\n                    color: getEstatusColor(doc.estatus),\n                    size: \"small\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                  align: \"center\",\n                  children: /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      display: 'flex',\n                      justifyContent: 'center',\n                      gap: 1\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: () => handleViewDocument(doc),\n                      sx: {\n                        color: '#1976d2'\n                      },\n                      title: \"Ver Documento\",\n                      children: /*#__PURE__*/_jsxDEV(Visibility, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 366,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 361,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                      onClick: () => handleDownloadDocument(doc),\n                      sx: {\n                        color: '#757575'\n                      },\n                      title: \"Descargar\",\n                      children: /*#__PURE__*/_jsxDEV(Download, {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 373,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 368,\n                      columnNumber: 25\n                    }, this), doc.estatus === 'PENDIENTE' && /*#__PURE__*/_jsxDEV(_Fragment, {\n                      children: [/*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: () => openReviewDialog(doc, true),\n                        sx: {\n                          color: '#008000'\n                        },\n                        title: \"Aprobar\",\n                        children: /*#__PURE__*/_jsxDEV(CheckCircle, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 382,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 377,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n                        onClick: () => openReviewDialog(doc, false),\n                        sx: {\n                          color: '#CC0000'\n                        },\n                        title: \"Rechazar\",\n                        children: /*#__PURE__*/_jsxDEV(Cancel, {}, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 389,\n                          columnNumber: 31\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 384,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 360,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 359,\n                  columnNumber: 21\n                }, this)]\n              }, doc.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationDialog, {\n      open: confirmDialog,\n      title: approving ? 'Aprobar Documento' : 'Rechazar Documento',\n      message: selectedDoc ? `¿Estás seguro de que deseas ${approving ? 'APROBAR' : 'RECHAZAR'} el documento ${selectedDoc.tipo} del estudiante ${(_selectedDoc$document = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document === void 0 ? void 0 : _selectedDoc$document.estudiante.usuario.nombre} ${(_selectedDoc$document2 = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document2 === void 0 ? void 0 : _selectedDoc$document2.estudiante.usuario.apellidoPaterno}?` : '',\n      onConfirm: handleConfirmReview,\n      onClose: () => setConfirmDialog(false),\n      confirmText: \"Continuar\",\n      cancelText: \"Cancelar\",\n      type: approving ? 'success' : 'error'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: reviewDialog,\n      onClose: () => setReviewDialog(false),\n      maxWidth: \"sm\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        sx: {\n          backgroundColor: approving ? '#008000' : '#CC0000',\n          color: '#FFFFFF'\n        },\n        children: approving ? '✅ Aprobar Documento' : '❌ Rechazar Documento'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        sx: {\n          mt: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          gutterBottom: true,\n          sx: {\n            color: '#000000'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Folio:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 13\n          }, this), \" \", selectedDoc === null || selectedDoc === void 0 ? void 0 : selectedDoc.folio]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          gutterBottom: true,\n          sx: {\n            color: '#000000'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Tipo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), \" \", selectedDoc === null || selectedDoc === void 0 ? void 0 : selectedDoc.tipo.replace(/_/g, ' ')]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"body1\",\n          gutterBottom: true,\n          sx: {\n            color: '#000000'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Estudiante:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), ' ', selectedDoc === null || selectedDoc === void 0 ? void 0 : (_selectedDoc$document3 = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document3 === void 0 ? void 0 : _selectedDoc$document3.estudiante.usuario.nombre, ' ', selectedDoc === null || selectedDoc === void 0 ? void 0 : (_selectedDoc$document4 = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document4 === void 0 ? void 0 : _selectedDoc$document4.estudiante.usuario.apellidoPaterno]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 11\n        }, this), !approving && /*#__PURE__*/_jsxDEV(TextField, {\n          fullWidth: true,\n          label: \"Motivo del Rechazo\",\n          multiline: true,\n          rows: 4,\n          value: motivoRechazo,\n          onChange: e => setMotivoRechazo(e.target.value),\n          required: true,\n          sx: {\n            mt: 2\n          },\n          placeholder: \"Ejemplo: El documento est\\xE1 borroso y no se puede leer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          p: 2\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => setReviewDialog(false),\n          sx: {\n            color: '#333333'\n          },\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          onClick: handleReview,\n          sx: {\n            backgroundColor: approving ? '#008000' : '#CC0000',\n            '&:hover': {\n              backgroundColor: approving ? '#006000' : '#AA0000'\n            }\n          },\n          children: approving ? 'Aprobar' : 'Rechazar'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Dialog, {\n      open: previewDialog,\n      onClose: () => {\n        if (selectedDoc !== null && selectedDoc !== void 0 && selectedDoc.previewUrl) {\n          window.URL.revokeObjectURL(selectedDoc.previewUrl);\n        }\n        setPreviewDialog(false);\n      },\n      maxWidth: \"lg\",\n      fullWidth: true,\n      children: [/*#__PURE__*/_jsxDEV(DialogTitle, {\n        sx: {\n          backgroundColor: '#1976d2',\n          color: '#FFFFFF'\n        },\n        children: \"\\uD83D\\uDC41\\uFE0F Previsualizaci\\xF3n del Documento\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogContent, {\n        sx: {\n          mt: 2,\n          minHeight: '500px'\n        },\n        children: selectedDoc && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Folio:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 17\n            }, this), \" \", selectedDoc.folio]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Tipo:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 492,\n              columnNumber: 17\n            }, this), \" \", selectedDoc.tipo.replace(/_/g, ' ')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 491,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"body2\",\n            gutterBottom: true,\n            sx: {\n              mb: 2\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Estudiante:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 495,\n              columnNumber: 17\n            }, this), ' ', (_selectedDoc$document5 = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document5 === void 0 ? void 0 : _selectedDoc$document5.estudiante.usuario.nombre, ' ', (_selectedDoc$document6 = selectedDoc.documentosEstudiante[0]) === null || _selectedDoc$document6 === void 0 ? void 0 : _selectedDoc$document6.estudiante.usuario.apellidoPaterno]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 15\n          }, this), selectedDoc.mimeType === 'application/pdf' ? /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: '100%',\n              height: '500px',\n              border: '1px solid #ddd',\n              borderRadius: 1,\n              overflow: 'hidden'\n            },\n            children: selectedDoc.previewUrl ? /*#__PURE__*/_jsxDEV(\"iframe\", {\n              src: selectedDoc.previewUrl,\n              title: \"Vista previa del documento\",\n              style: {\n                width: '100%',\n                height: '100%',\n                border: 'none'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 503,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                height: '100%'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                children: \"Cargando vista previa...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 23\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 509,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              textAlign: 'center'\n            },\n            children: selectedDoc.previewUrl ? /*#__PURE__*/_jsxDEV(\"img\", {\n              src: selectedDoc.previewUrl,\n              alt: \"Vista previa\",\n              style: {\n                maxWidth: '100%',\n                maxHeight: '500px',\n                borderRadius: '4px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Typography, {\n              children: \"Cargando vista previa...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DialogActions, {\n        sx: {\n          p: 2\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            if (selectedDoc !== null && selectedDoc !== void 0 && selectedDoc.previewUrl) {\n              window.URL.revokeObjectURL(selectedDoc.previewUrl);\n            }\n            setPreviewDialog(false);\n            setSelectedDoc(null);\n          },\n          sx: {\n            color: '#333333'\n          },\n          children: \"Cerrar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 531,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDocumentsPage, \"S0S4bPcaFTT2FRNiyoqXdHbu+qU=\", false, function () {\n  return [useNavigate, useAuthStore];\n});\n_c = AdminDocumentsPage;\nexport default AdminDocumentsPage;\nvar _c;\n$RefreshReg$(_c, \"AdminDocumentsPage\");","map":{"version":3,"names":["React","useState","useEffect","Box","Container","Paper","Typography","Button","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","IconButton","Chip","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Tabs","Tab","Stack","InputAdornment","ArrowBack","CheckCircle","Cancel","Visibility","Logout","Download","Search","useNavigate","useAuthStore","toast","ConfirmationDialog","api","PageHeader","jsxDEV","_jsxDEV","Fragment","_Fragment","AdminDocumentsPage","_s","_selectedDoc$document","_selectedDoc$document2","_selectedDoc$document3","_selectedDoc$document4","_selectedDoc$document5","_selectedDoc$document6","navigate","logout","documentos","setDocumentos","loading","setLoading","selectedDoc","setSelectedDoc","reviewDialog","setReviewDialog","approving","setApproving","motivoRechazo","setMotivoRechazo","tabValue","setTabValue","confirmDialog","setConfirmDialog","previewDialog","setPreviewDialog","busqueda","setBusqueda","loadDocuments","token","localStorage","getItem","response","get","headers","Authorization","data","error","handleReview","trim","patch","id","aprobado","undefined","success","_error$response","_error$response$data","_error$response$data$","message","openReviewDialog","doc","approve","handleConfirmReview","handleViewDocument","responseType","blobUrl","window","URL","createObjectURL","docWithPreview","previewUrl","console","handleDownloadDocument","url","link","document","createElement","href","download","folio","tipo","mimeType","split","body","appendChild","click","removeChild","revokeObjectURL","getEstatusColor","estatus","handleLogout","filteredDocs","filter","_doc$documentosEstudi","_estudiante$usuario$a","_estudiante$matricula","passesStatus","terminoBusqueda","toLowerCase","estudiante","documentosEstudiante","nombreCompleto","usuario","nombre","apellidoPaterno","matricula","includes","sx","minHeight","backgroundColor","children","title","subtitle","gradientFrom","gradientTo","maxWidth","actions","direction","spacing","variant","color","startIcon","fileName","_jsxFileName","lineNumber","columnNumber","onClick","borderColor","mb","borderRadius","value","onChange","e","newValue","label","p","fullWidth","placeholder","target","size","InputProps","startAdornment","position","component","fontWeight","textAlign","colSpan","align","py","length","map","_doc$documentosEstudi2","_doc$documentosEstudi3","_doc$documentosEstudi4","fontFamily","replace","tamanoBytes","toFixed","display","justifyContent","gap","open","onConfirm","onClose","confirmText","cancelText","type","mt","gutterBottom","multiline","rows","required","width","height","border","overflow","src","style","alignItems","alt","maxHeight","_c","$RefreshReg$"],"sources":["C:/Users/User/Documents/GitHub/Sistema_Abierto/proyecto/frontend/src/pages/AdminDocumentsPage.tsx"],"sourcesContent":["/**\r\n * Página de Revisión de Documentos (Admin)\r\n * Ver y aprobar/rechazar documentos de estudiantes\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  IconButton,\r\n  Chip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Tabs,\r\n  Tab,\r\n  Stack,\r\n  InputAdornment,\r\n} from '@mui/material';\r\nimport {\r\n  ArrowBack,\r\n  CheckCircle,\r\n  Cancel,\r\n  Visibility,\r\n  Logout,\r\n  Download,\r\n  ViewInAr,\r\n  Search,\r\n} from '@mui/icons-material';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuthStore } from '../store/authStore';\r\nimport toast from 'react-hot-toast';\r\nimport ConfirmationDialog from '../components/ConfirmationDialog';\r\nimport api from '../services/api.service';\r\nimport PageHeader from '../components/PageHeader';\r\n\r\ninterface Documento {\r\n  id: string;\r\n  folio: string;\r\n  tipo: string;\r\n  titulo: string;\r\n  estatus: string;\r\n  tamanoBytes: number;\r\n  mimeType: string;\r\n  createdAt: string;\r\n  documentosEstudiante: Array<{\r\n    estudiante: {\r\n      matricula: string;\r\n      usuario: {\r\n        nombre: string;\r\n        apellidoPaterno: string;\r\n      };\r\n    };\r\n  }>;\r\n}\r\n\r\nexport const AdminDocumentsPage: React.FC = () => {\r\n  const navigate = useNavigate();\r\n  const { logout } = useAuthStore();\r\n  const [documentos, setDocumentos] = useState<Documento[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedDoc, setSelectedDoc] = useState<Documento | null>(null);\r\n  const [reviewDialog, setReviewDialog] = useState(false);\r\n  const [approving, setApproving] = useState(true);\r\n  const [motivoRechazo, setMotivoRechazo] = useState('');\r\n  const [tabValue, setTabValue] = useState(0);\r\n  const [confirmDialog, setConfirmDialog] = useState(false);\r\n  const [previewDialog, setPreviewDialog] = useState(false);\r\n  const [busqueda, setBusqueda] = useState<string>('');\r\n\r\n  useEffect(() => {\r\n    loadDocuments();\r\n  }, []);\r\n\r\n  const loadDocuments = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const token = localStorage.getItem('accessToken');\r\n      const response = await api.get('/documentos', {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n\r\n      setDocumentos(response.data.data);\r\n    } catch (error) {\r\n      toast.error('Error al cargar documentos');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleReview = async () => {\r\n    if (!selectedDoc) return;\r\n\r\n    if (!approving && !motivoRechazo.trim()) {\r\n      toast.error('Debes proporcionar un motivo de rechazo');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      await api.patch(\r\n        `/upload/${selectedDoc.id}/review`,\r\n        {\r\n          aprobado: approving,\r\n          motivoRechazo: approving ? undefined : motivoRechazo,\r\n        },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n\r\n      toast.success(approving ? 'Documento aprobado' : 'Documento rechazado');\r\n      setReviewDialog(false);\r\n      setMotivoRechazo('');\r\n      loadDocuments();\r\n    } catch (error: any) {\r\n      toast.error(error.response?.data?.error?.message || 'Error al revisar documento');\r\n    }\r\n  };\r\n\r\n  const openReviewDialog = (doc: Documento, approve: boolean) => {\r\n    setSelectedDoc(doc);\r\n    setApproving(approve);\r\n    setConfirmDialog(true);\r\n  };\r\n\r\n  const handleConfirmReview = () => {\r\n    setConfirmDialog(false);\r\n    setReviewDialog(true);\r\n  };\r\n\r\n  const handleViewDocument = async (doc: Documento) => {\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      const response = await api.get(\r\n        `/upload/view/${doc.id}`,\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n          responseType: 'blob',\r\n        }\r\n      );\r\n\r\n      const blobUrl = window.URL.createObjectURL(response.data);\r\n      const docWithPreview = { ...doc, previewUrl: blobUrl };\r\n      setSelectedDoc(docWithPreview as any);\r\n      setPreviewDialog(true);\r\n    } catch (error: any) {\r\n      console.error('Error al cargar vista previa:', error);\r\n      toast.error('No se pudo cargar la vista previa del documento');\r\n    }\r\n  };\r\n\r\n  const handleDownloadDocument = async (doc: Documento) => {\r\n    try {\r\n      const token = localStorage.getItem('accessToken');\r\n      const response = await api.get(\r\n        `/upload/download/${doc.id}`,\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n          responseType: 'blob',\r\n        }\r\n      );\r\n\r\n      const url = window.URL.createObjectURL(response.data);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `${doc.folio}_${doc.tipo}.${doc.mimeType.split('/')[1]}`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      window.URL.revokeObjectURL(url);\r\n\r\n      toast.success('Documento descargado exitosamente');\r\n    } catch (error: any) {\r\n      console.error('Error al descargar:', error);\r\n      toast.error('No se pudo descargar el documento');\r\n    }\r\n  };\r\n\r\n  const getEstatusColor = (estatus: string) => {\r\n    switch (estatus) {\r\n      case 'APROBADO': return 'success';\r\n      case 'RECHAZADO': return 'error';\r\n      case 'PENDIENTE': return 'warning';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  const filteredDocs = documentos.filter((doc) => {\r\n    // Filtro por estatus\r\n    let passesStatus = true;\r\n    if (tabValue === 0) passesStatus = doc.estatus === 'PENDIENTE';\r\n    else if (tabValue === 1) passesStatus = doc.estatus === 'APROBADO';\r\n    else if (tabValue === 2) passesStatus = doc.estatus === 'RECHAZADO';\r\n\r\n    if (!passesStatus) return false;\r\n\r\n    // Filtro por búsqueda (nombre o matrícula)\r\n    if (!busqueda.trim()) return true;\r\n\r\n    const terminoBusqueda = busqueda.toLowerCase().trim();\r\n    const estudiante = doc.documentosEstudiante[0]?.estudiante;\r\n    if (!estudiante) return false;\r\n\r\n    const nombreCompleto = `${estudiante.usuario.nombre} ${estudiante.usuario.apellidoPaterno ?? ''}`.toLowerCase();\r\n    const matricula = estudiante.matricula?.toLowerCase() || '';\r\n\r\n    return nombreCompleto.includes(terminoBusqueda) || matricula.includes(terminoBusqueda);\r\n  });\r\n\r\n  return (\r\n    <Box sx={{ minHeight: '100vh', backgroundColor: '#f5f5f5' }}>\r\n      <PageHeader\r\n        title=\"Revisión de Documentos\"\r\n        subtitle=\"Coordinación académica · Sistema abierto\"\r\n        gradientFrom=\"#008000\"\r\n        gradientTo=\"#006000\"\r\n        maxWidth=\"xl\"\r\n        actions={\r\n          <Stack direction=\"row\" spacing={2}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"inherit\"\r\n              startIcon={<ArrowBack />}\r\n              onClick={() => navigate('/admin/dashboard')}\r\n              sx={{\r\n                borderColor: '#FFFFFF',\r\n                color: '#FFFFFF',\r\n                '&:hover': { borderColor: '#FFFFFF', backgroundColor: 'rgba(255,255,255,0.1)' },\r\n              }}\r\n            >\r\n              Regresar\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              color=\"inherit\"\r\n              startIcon={<Logout />}\r\n              onClick={handleLogout}\r\n              sx={{\r\n                borderColor: '#FFFFFF',\r\n                color: '#FFFFFF',\r\n                '&:hover': { borderColor: '#FFFFFF', backgroundColor: 'rgba(255,255,255,0.1)' },\r\n              }}\r\n            >\r\n              Salir\r\n            </Button>\r\n          </Stack>\r\n        }\r\n      />\r\n\r\n      <Container>\r\n        {/* Tabs de filtros */}\r\n        <Paper sx={{ mb: 3, borderRadius: 2 }}>\r\n          <Tabs\r\n            value={tabValue}\r\n            onChange={(e, newValue) => setTabValue(newValue)}\r\n            sx={{\r\n              '& .MuiTab-root': { color: '#333333' },\r\n              '& .Mui-selected': { color: '#008000' },\r\n              '& .MuiTabs-indicator': { backgroundColor: '#008000' },\r\n            }}\r\n          >\r\n            <Tab label=\"Pendientes\" />\r\n            <Tab label=\"Aprobados\" />\r\n            <Tab label=\"Rechazados\" />\r\n            <Tab label=\"Todos\" />\r\n          </Tabs>\r\n        </Paper>\r\n\r\n        {/* Buscador */}\r\n        <Paper sx={{ mb: 3, p: 2, borderRadius: 2 }}>\r\n          <TextField\r\n            fullWidth\r\n            placeholder=\"Buscar por nombre o matrícula...\"\r\n            value={busqueda}\r\n            onChange={(e) => setBusqueda(e.target.value)}\r\n            size=\"small\"\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <Search />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n            sx={{ maxWidth: 400 }}\r\n          />\r\n        </Paper>\r\n\r\n        {/* Tabla de Documentos */}\r\n        <TableContainer component={Paper} sx={{ borderRadius: 2 }}>\r\n          <Table>\r\n            <TableHead sx={{ backgroundColor: '#008000' }}>\r\n              <TableRow>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Folio</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Tipo</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Estudiante</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Matrícula</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Tamaño</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold' }}>Estatus</TableCell>\r\n                <TableCell sx={{ color: '#FFFFFF', fontWeight: 'bold', textAlign: 'center' }}>Acciones</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {loading ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                    <Typography sx={{ color: '#888888' }}>Cargando documentos...</Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : filteredDocs.length === 0 ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                    <Typography sx={{ color: '#888888' }}>No hay documentos en esta categoría</Typography>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : (\r\n                filteredDocs.map((doc) => (\r\n                  <TableRow\r\n                    key={doc.id}\r\n                    sx={{\r\n                      '&:hover': {\r\n                        backgroundColor: '#f0fff0',\r\n                      },\r\n                    }}\r\n                  >\r\n                    <TableCell sx={{ fontFamily: 'monospace', color: '#000000' }}>{doc.folio}</TableCell>\r\n                    <TableCell sx={{ color: '#000000' }}>{doc.tipo.replace(/_/g, ' ')}</TableCell>\r\n                    <TableCell sx={{ color: '#000000' }}>\r\n                      {doc.documentosEstudiante[0]?.estudiante.usuario.nombre}{' '}\r\n                      {doc.documentosEstudiante[0]?.estudiante.usuario.apellidoPaterno}\r\n                    </TableCell>\r\n                    <TableCell sx={{ color: '#333333' }}>\r\n                      {doc.documentosEstudiante[0]?.estudiante.matricula || 'N/A'}\r\n                    </TableCell>\r\n                    <TableCell sx={{ color: '#333333' }}>\r\n                      {(doc.tamanoBytes / 1024 / 1024).toFixed(2)} MB\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Chip\r\n                        label={doc.estatus}\r\n                        color={getEstatusColor(doc.estatus) as any}\r\n                        size=\"small\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell align=\"center\">\r\n                      <Box sx={{ display: 'flex', justifyContent: 'center', gap: 1 }}>\r\n                        <IconButton\r\n                          onClick={() => handleViewDocument(doc)}\r\n                          sx={{ color: '#1976d2' }}\r\n                          title=\"Ver Documento\"\r\n                        >\r\n                          <Visibility />\r\n                        </IconButton>\r\n                        <IconButton\r\n                          onClick={() => handleDownloadDocument(doc)}\r\n                          sx={{ color: '#757575' }}\r\n                          title=\"Descargar\"\r\n                        >\r\n                          <Download />\r\n                        </IconButton>\r\n                        {doc.estatus === 'PENDIENTE' && (\r\n                          <>\r\n                            <IconButton\r\n                              onClick={() => openReviewDialog(doc, true)}\r\n                              sx={{ color: '#008000' }}\r\n                              title=\"Aprobar\"\r\n                            >\r\n                              <CheckCircle />\r\n                            </IconButton>\r\n                            <IconButton\r\n                              onClick={() => openReviewDialog(doc, false)}\r\n                              sx={{ color: '#CC0000' }}\r\n                              title=\"Rechazar\"\r\n                            >\r\n                              <Cancel />\r\n                            </IconButton>\r\n                          </>\r\n                        )}\r\n                      </Box>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      </Container>\r\n\r\n      {/* Diálogo de Confirmación antes de Revisar */}\r\n      <ConfirmationDialog\r\n        open={confirmDialog}\r\n        title={approving ? 'Aprobar Documento' : 'Rechazar Documento'}\r\n        message={\r\n          selectedDoc\r\n            ? `¿Estás seguro de que deseas ${approving ? 'APROBAR' : 'RECHAZAR'} el documento ${selectedDoc.tipo} del estudiante ${selectedDoc.documentosEstudiante[0]?.estudiante.usuario.nombre} ${selectedDoc.documentosEstudiante[0]?.estudiante.usuario.apellidoPaterno}?`\r\n            : ''\r\n        }\r\n        onConfirm={handleConfirmReview}\r\n        onClose={() => setConfirmDialog(false)}\r\n        confirmText=\"Continuar\"\r\n        cancelText=\"Cancelar\"\r\n        type={approving ? 'success' : 'error'}\r\n      />\r\n\r\n      {/* Dialog de Revisión (Motivo de rechazo) */}\r\n      <Dialog open={reviewDialog} onClose={() => setReviewDialog(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle sx={{ backgroundColor: approving ? '#008000' : '#CC0000', color: '#FFFFFF' }}>\r\n          {approving ? '✅ Aprobar Documento' : '❌ Rechazar Documento'}\r\n        </DialogTitle>\r\n        <DialogContent sx={{ mt: 2 }}>\r\n          <Typography variant=\"body1\" gutterBottom sx={{ color: '#000000' }}>\r\n            <strong>Folio:</strong> {selectedDoc?.folio}\r\n          </Typography>\r\n          <Typography variant=\"body1\" gutterBottom sx={{ color: '#000000' }}>\r\n            <strong>Tipo:</strong> {selectedDoc?.tipo.replace(/_/g, ' ')}\r\n          </Typography>\r\n          <Typography variant=\"body1\" gutterBottom sx={{ color: '#000000' }}>\r\n            <strong>Estudiante:</strong>{' '}\r\n            {selectedDoc?.documentosEstudiante[0]?.estudiante.usuario.nombre}{' '}\r\n            {selectedDoc?.documentosEstudiante[0]?.estudiante.usuario.apellidoPaterno}\r\n          </Typography>\r\n\r\n          {!approving && (\r\n            <TextField\r\n              fullWidth\r\n              label=\"Motivo del Rechazo\"\r\n              multiline\r\n              rows={4}\r\n              value={motivoRechazo}\r\n              onChange={(e) => setMotivoRechazo(e.target.value)}\r\n              required\r\n              sx={{ mt: 2 }}\r\n              placeholder=\"Ejemplo: El documento está borroso y no se puede leer\"\r\n            />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions sx={{ p: 2 }}>\r\n          <Button onClick={() => setReviewDialog(false)} sx={{ color: '#333333' }}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleReview}\r\n            sx={{\r\n              backgroundColor: approving ? '#008000' : '#CC0000',\r\n              '&:hover': {\r\n                backgroundColor: approving ? '#006000' : '#AA0000',\r\n              },\r\n            }}\r\n          >\r\n            {approving ? 'Aprobar' : 'Rechazar'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Dialog de Vista Previa */}\r\n      <Dialog \r\n        open={previewDialog} \r\n        onClose={() => {\r\n          if ((selectedDoc as any)?.previewUrl) {\r\n            window.URL.revokeObjectURL((selectedDoc as any).previewUrl);\r\n          }\r\n          setPreviewDialog(false);\r\n        }} \r\n        maxWidth=\"lg\" \r\n        fullWidth\r\n      >\r\n        <DialogTitle sx={{ backgroundColor: '#1976d2', color: '#FFFFFF' }}>\r\n          👁️ Previsualización del Documento\r\n        </DialogTitle>\r\n        <DialogContent sx={{ mt: 2, minHeight: '500px' }}>\r\n          {selectedDoc && (\r\n            <>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                <strong>Folio:</strong> {selectedDoc.folio}\r\n              </Typography>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                <strong>Tipo:</strong> {selectedDoc.tipo.replace(/_/g, ' ')}\r\n              </Typography>\r\n              <Typography variant=\"body2\" gutterBottom sx={{ mb: 2 }}>\r\n                <strong>Estudiante:</strong>{' '}\r\n                {selectedDoc.documentosEstudiante[0]?.estudiante.usuario.nombre}{' '}\r\n                {selectedDoc.documentosEstudiante[0]?.estudiante.usuario.apellidoPaterno}\r\n              </Typography>\r\n\r\n              {selectedDoc.mimeType === 'application/pdf' ? (\r\n                <Box sx={{ width: '100%', height: '500px', border: '1px solid #ddd', borderRadius: 1, overflow: 'hidden' }}>\r\n                  {(selectedDoc as any).previewUrl ? (\r\n                    <iframe\r\n                      src={(selectedDoc as any).previewUrl}\r\n                      title=\"Vista previa del documento\"\r\n                      style={{ width: '100%', height: '100%', border: 'none' }}\r\n                    />\r\n                  ) : (\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', height: '100%' }}>\r\n                      <Typography>Cargando vista previa...</Typography>\r\n                    </Box>\r\n                  )}\r\n                </Box>\r\n              ) : (\r\n                <Box sx={{ textAlign: 'center' }}>\r\n                  {(selectedDoc as any).previewUrl ? (\r\n                    <img\r\n                      src={(selectedDoc as any).previewUrl}\r\n                      alt=\"Vista previa\"\r\n                      style={{ maxWidth: '100%', maxHeight: '500px', borderRadius: '4px' }}\r\n                    />\r\n                  ) : (\r\n                    <Typography>Cargando vista previa...</Typography>\r\n                  )}\r\n                </Box>\r\n              )}\r\n            </>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions sx={{ p: 2 }}>\r\n          <Button\r\n            onClick={() => {\r\n              if ((selectedDoc as any)?.previewUrl) {\r\n                window.URL.revokeObjectURL((selectedDoc as any).previewUrl);\r\n              }\r\n              setPreviewDialog(false);\r\n              setSelectedDoc(null);\r\n            }}\r\n            sx={{ color: '#333333' }}\r\n          >\r\n            Cerrar\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AdminDocumentsPage;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}